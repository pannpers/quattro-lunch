<template>
  <require from="../resources/value-converters/format"></require>

  <article id="top">
    <header>
      <h1>Welcome to Aurelia Scaffold App</h1>
    </header>

    <button click.delegate="signOut()">
      Sign Out
    </button>

    <section if.bind="lunch.hasFixedParties">
      Latest Lunch Date: ${lunch.lunchDate | format}
      <ul>
        <li repeat.for="party of lunch.parties">
          Party ID: ${party.id}
        </li>
      </ul>
    </section>

    <section else>
      Next Lunch will hold on ${lunch.lunchDate | format}
      <p>
        Let's Generate a New Parties!!
      </p>

      <button type="button" click.delegate="generateParties()">Generate</button>

      <button type="button" click.delegate="saveParty()" if.bind="tmpParties.length > 0">Fix!!</button>

      <ul>
        <li repeat.for="party of tmpParties">
          <p>
            Leader: ${party.leader.name}
            <ul>
              <li repeat.for="member of party.members">
                Member ${index}: ${member.name}
              </li>
            </ul>
          </p>
        </li>
      </ul>

    </section>
  </article>
</template>
